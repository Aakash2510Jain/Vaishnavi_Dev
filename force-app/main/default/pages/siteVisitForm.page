<apex:page sidebar="false" showHeader="false" standardStylesheets="false" controller="siteVisitFormController">
    <html>
        <head>
            <apex:stylesheet value="{!$Resource.BookingFormCSS}" />
            <c:Libraries ></c:Libraries>
            <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script> 
            <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800&display=swap" rel="stylesheet" />
        </head>

        <script>
            var ageGroup = JSON.parse('{!ageGroup}');
            var employmentType = JSON.parse('{!employmentType}');
            var budget = JSON.parse('{!budget}');
            var area = JSON.parse('{!area}');
            var constructionStatus = JSON.parse('{!constructionStatus}');
            var purposeOfBuying = JSON.parse('{!purposeOfBuying}');
            var walkinSource = JSON.parse('{!walkinSource}');
            var gender = JSON.parse('{!gender}');
            var facilitatedBy = JSON.parse('{!facilitatedBy}');
            var classification = JSON.parse('{!classification}');
            var leadClassification = JSON.parse('{!leadClassification}');
            var closedReason = JSON.parse('{!closedReason}');
            var ownership = JSON.parse('{!ownership}');
            var sourceOfFunding = JSON.parse('{!sourceOfFunding}');
            var ethnicity = JSON.parse('{!ethnicity}');

            var app = angular.module('visit_app', []);
            app.controller('visit_ctrl', function ($scope) {
                debugger;
                $scope.ageGroup = ageGroup;
                $scope.employmentType = employmentType;
                $scope.budget = budget;
                $scope.area = area;
                $scope.constructionStatus = constructionStatus;
                $scope.purposeOfBuying = purposeOfBuying;
                $scope.walkinSource = walkinSource;
                $scope.gender = gender;
                $scope.facilitatedBy = facilitatedBy;
                $scope.classification = classification;
                $scope.leadClassification = leadClassification;
                $scope.closedReason = closedReason;
                $scope.ownership = ownership;
                $scope.sourceOfFunding = sourceOfFunding;
                $scope.ethnicity = ethnicity;
                $scope.visit = {};
                
                $scope.errorMsg = false;
                $scope.showLeadDetails = false;
                $scope.showCreateLead = false;
                $scope.showVisitAfterCreatn = false;
                $scope.showConvertedLead = false;
                
                $scope.showVisitSection = false;
                $scope.showCustReq = false;
                $scope.visitDet = false;
                $scope.showGRE = false;
                $scope.showSalesManager = false;

                $scope.searchLead = function(){
                    debugger;
                    siteVisitFormController.searchLead($scope.searchValue,function(result,event){
                        debugger;
                        if(event.status && result){
                            if(result.leadRec != null){
                                console.log('success....');
                                $scope.leadDetails = result.leadRec;
                                $scope.leadId = result.leadRec.Id;
                                $scope.showLeadDetails = true;
                                $scope.errorMsg = false;
                                $scope.showCreateLead = false;
                            }else{
                                console.log('success....');
                                $scope.oppDetails = result.oppRec;
                                //$scope.leadId = result.Id;
                                $scope.showLeadDetails = false;
                                $scope.errorMsg = false;
                                $scope.showCreateLead = false;
                                $scope.showConvertedLead = true;
                            }
                            
                        }else{
                            $scope.errorMsg = true;
                            $scope.showLeadDetails = false;
                            $scope.showCreateLead = false;
                        }
                    })
                }

                $scope.createLead = function(){
                    debugger;
                    $scope.showCreateLead = true;
                    $scope.errorMsg = false;
                    $scope.showLeadDetails = false;
                }

                $scope.createLeadRecord = function(){
                    debugger;
                    siteVisitFormController.createLeadRecord($scope.ledDetails,function(result,event){
                       debugger;
                       if(event.status && result){
                            debugger;
                            $scope.leadId = result;
                            swal({
                                icon: 'success',
                                title: 'success',
                                text: 'Lead has been created successfully..'
                            })
                            $scope.showVisitAfterCreatn = true;
                       }
                    })
                }

                $scope.OnClickcreateVisit = function(){
                    debugger;
                    $scope.showVisitSection = true;
                    $scope.errorMsg = false;
                    $scope.showLeadDetails = false;
                    $scope.showCreateLead = false;
                    $scope.showVisitAfterCreatn = false;
                }

                $scope.changeOfAgeGroup = function(){
                    debugger;
                    $scope.visit.Age_Group__c = value;
                }

                $scope.ChangeOfEmpType = function(){
                    debugger;
                    $scope.visit.Employment_Type__c = value;
                }

                $scope.saveCustomerDet = function(){
                    debugger;
                    //$scope.visit.Lead__c = $scope.leadId;

                    var year = 0
                    var month = 0;
                    var day = 0;
                    if($scope.visit.Date_Of_Birth__c !=undefined && $scope.visit.Date_Of_Birth__c!=''){
                        year = $scope.visit.Date_Of_Birth__c.getUTCFullYear();
                        month = $scope.visit.Date_Of_Birth__c.getUTCMonth()+1;
                        day = $scope.visit.Date_Of_Birth__c.getDate();
                    }
                    delete($scope.visit.Date_Of_Birth__c);
                    delete($scope.visit.Actual_visit_date__c);
                    siteVisitFormController.insertVisitRecord(JSON.stringify($scope.visit),$scope.leadId,year,month,day,function(result,event){
                    debugger;
                    if(event.status && result){
                        debugger;
                        $scope.visitId = result;
                        swal({
                            icon: 'success',
                            title: 'success',
                            text: 'Customer Details have been saved successfully..'
                        })
                        $scope.showCustReq = true;
                        $scope.showVisitSection = false;
                        $scope.visitDet = false;
                        $scope.showGRE = false;
                        $scope.showSalesManager = false;
                        $scope.$apply();
                    }
                })
            }

            $scope.saveCustomerReq = function(){
                    debugger;

                    $scope.visit.Id = $scope.visitId;
                    delete($scope.visit.Date_Of_Birth__c);
                    delete($scope.visit.Actual_visit_date__c);
                    siteVisitFormController.updateVisitRecord($scope.visit,$scope.leadId,function(result,event){
                    debugger;
                    if(event.status && result){
                        debugger;
                        swal({
                            icon: 'success',
                            title: 'success',
                            text: 'Customer Requirement Details have been saved successfully..'
                        })
                        $scope.visitDet = true;
                        $scope.showCustReq = false;
                        $scope.showVisitSection = false;
                        $scope.showGRE = false;
                        $scope.showSalesManager = false;
                        $scope.$apply();
                    }
                })
            }

            $scope.savevisitDetails = function(){
                    debugger;

                    $scope.visit.Id = $scope.visitId;
                    delete($scope.visit.Date_Of_Birth__c);
                    delete($scope.visit.Actual_visit_date__c);
                    siteVisitFormController.updateVisitRecord($scope.visit,$scope.leadId,function(result,event){
                    debugger;
                    if(event.status && result){
                        debugger;
                        swal({
                            icon: 'success',
                            title: 'success',
                            text: 'Visit Details have been saved successfully..'
                        })
                        $scope.showGRE = true;
                        $scope.visitDet = false;
                        $scope.showCustReq = false;
                        $scope.showVisitSection = false;
                        $scope.showSalesManager = false;
                        $scope.$apply();
                    }
                })
            }

            $scope.saveGREDetails = function(){
                    debugger;
                    var year = 0
                    var month = 0;
                    var day = 0;
                    if($scope.visit.GRE_Date_of_Birth__c !=undefined && $scope.visit.GRE_Date_of_Birth__c!=''){
                        year = $scope.visit.GRE_Date_of_Birth__c.getUTCFullYear();
                        month = $scope.visit.GRE_Date_of_Birth__c.getUTCMonth()+1;
                        day = $scope.visit.GRE_Date_of_Birth__c.getDate();
                    }

                    $scope.visit.Id = $scope.visitId;
                    delete($scope.visit.Date_Of_Birth__c);
                    delete($scope.visit.Actual_visit_date__c);
                    delete($scope.visit.GRE_Date_of_Birth__c);
                    siteVisitFormController.updateGREDetails($scope.visit,$scope.leadId,day,month,year,function(result,event){
                    debugger;
                    if(event.status && result){
                        debugger;
                        swal({
                            icon: 'success',
                            title: 'success',
                            text: 'To be filled by GRE Details have been saved successfully..'
                        })
                        $scope.showGRE = false;
                        $scope.visitDet = false;
                        $scope.showCustReq = false;
                        $scope.showVisitSection = false;
                        $scope.showSalesManager = true;
                        $scope.$apply();
                    }
                })
            }

            $scope.finalSubmit = function(){
                    debugger;

                    var visitYear = 0
                    var visitMonth = 0;
                    var visitDay = 0;
                    if($scope.visit.Actual_visit_date__c !=undefined && $scope.visit.Actual_visit_date__c!=''){
                        visitYear = $scope.visit.Actual_visit_date__c.getUTCFullYear();
                        visitMonth = $scope.visit.Actual_visit_date__c.getUTCMonth()+1;
                        visitDay = $scope.visit.Actual_visit_date__c.getDate();
                    }

                    $scope.visit.Id = $scope.visitId;
                    delete($scope.visit.Date_Of_Birth__c);
                    delete($scope.visit.Actual_visit_date__c);
                    siteVisitFormController.finalSubmit($scope.visit,$scope.leadId,visitYear,visitMonth,visitDay,function(result,event){
                    debugger;
                    if(event.status && result){
                        debugger;
                        swal({
                            icon: 'success',
                            title: 'success',
                            text: 'To be filled by Sales Manager Details have been saved successfully..'
                        })
                        $scope.showGRE = true;
                        $scope.visitDet = false;
                        $scope.showCustReq = false;
                        $scope.showVisitSection = false;
                        $scope.showSalesManager = false;
                        $scope.$apply();
                    }
                })
            }

            $scope.changeOfBudget = function(value){
                debugger;
                $scope.visit.Budget__c = value;
            }
            $scope.changeOfArea = function(value){
                debugger;
                $scope.visit.Area__c = value;
            }
            $scope.changeOfConstStatus = function(value){
                debugger;
                $scope.visit.Construction_Status__c = value;
            }
            $scope.changeOfPurposeOfBuying = function(value){
                debugger;
                $scope.visit.Purpose_Of_Buying__c = value;
            }

            $scope.showFirst = function(){
                debugger;
                $scope.showVisitSection = true;
                $scope.showCustReq = false;
                $scope.visitDet = false;
                $scope.showGRE = false;
                $scope.showSalesManager = false;
            }

            $scope.showSecond = function(){
                debugger;
                $scope.showVisitSection = false;
                $scope.showCustReq = true;
                $scope.visitDet = false;
                $scope.showGRE = false;
                $scope.showSalesManager = false;
            }

            $scope.showThird = function(){
                debugger;
                $scope.showVisitSection = false;
                $scope.showCustReq = false;
                $scope.visitDet = true;
                $scope.showGRE = false;
                $scope.showSalesManager = false;
            }
            $scope.showForth = function(){
                debugger;
                $scope.showVisitSection = false;
                $scope.showCustReq = false;
                $scope.visitDet = false;
                $scope.showGRE = true;
                $scope.showSalesManager = false;
            }

            $scope.changeOfLeadSource = function(value){
                debugger;
                $scope.visit.Walkin_Source__c = value
            }
            $scope.changeOfGender = function(value){
                debugger;
                $scope.visit.Customer_Gender__c = value
            }
            $scope.changeOfFacilitatedBy = function(value){
                debugger;
                $scope.visit.Facilitated_By__c = value
            }

            $scope.changeOfClassification = function(value){
                debugger;
                $scope.visit.Customer_Classicfication__c = value
            }
            $scope.changeOfLeadClassificatn = function(value){
                debugger;
                $scope.visit.Lead_Classification__c = value
            }
            $scope.changeOfLeadClosed = function(value){
                debugger;
                $scope.visit.Reason_Of_Lead_Closed__c = value
            }
            $scope.changeOfOwnership = function(value){
                debugger;
                $scope.visit.Current_House_Ownership__c = value
            }
            $scope.changeOfSourceFunding = function(value){
                debugger;
                $scope.visit.Source_Of_Funding__c = value
            }
            $scope.changeOfEthnicity = function(value){
                debugger;
                $scope.visit.Ethnicity__c = value
            }

            })
        </script>

        <div ng-app="visit_app" ng-controller="visit_ctrl" style="overflow-x: hidden;">
            <body>
                <div class="header-siteVisit">
                    <h3 class="header-text text-center">VAISHNAVI</h3>
                </div>
                <div class="row">
                    <div class="col-md-4" style="padding-left: 4%;">
                        <apex:image url="{!$Resource.New}" />
                    </div>
                    <div class="col-md-4">
                        <h5 class="heading text-center"><b>VAISHNAVI 81 INFRASTRUCTURES LLP</b></h5>
                        <h5 class="heading-loc text-center">Yelahanka, Bengaluru</h5>
                    </div>
                    <div class="col-md-4" style="padding-right: 2%;">
                        <h6 class="header-address">#2/2,Waltaon Road Off Vittal Mallya Road<br/>
                            Bengaluru - 560 001<br/>
                            +91 80 6696 6696<br/>
                            www.vaishnavilife.com</h6>
                    </div>
                </div>
                <hr class="border" />

                <div class="booking-form3">
                    <div class="container mb-5">
                        <!-- <h5 class="heading text-center"><b>SITE VISIT FORM</b></h5> -->

                        <div class="row mt-3">
                            <div class="col-md-5">
                                <label class="label">Enter Email or Phone</label>
                                <input type="text" class="form-control mt-2" ng-model="searchValue" />
                            </div>
                            <div class="col-md-7 mt-4">
                                <button class="button" ng-click="searchLead()">Search</button>
                                <button class="button" ng-click="createLead()"><i class="fa fa-plus"></i>  Create New Lead</button>
                                <button class="button" ng-show="showLeadDetails || showVisitAfterCreatn" ng-click="OnClickcreateVisit()">Create Visit</button>
                            </div>
                        </div>

                        <div class="row mt-5" ng-show="errorMsg">
                            <h3 style="color: red; text-align:center;">No such record available ! Try Again.....</h3>
                        </div>

                        <div class="row mt-5" ng-show="showLeadDetails">
                            <h6 style="color:#1e45aa;"><b>Lead Details</b></h6>
                            <div class="col-md-6 mt-3">
                                <label class="label pe-3 text-nowrap">Name</label>
                                <input type="text" class="form-control" ng-model="leadDetails.Name__c" ng-disabled="true" />
                            </div>

                            <div class="col-md-6 mt-3">
                                <label class="label pe-3 text-nowrap">Email ID</label>
                                <input type="text" class="form-control" ng-model="leadDetails.Email__c" ng-disabled="true" />
                            </div>

                            <div class="col-md-6 mt-3">
                                <label class="label pe-3 text-nowrap">Phone No.</label>
                                <input type="text" class="form-control" ng-model="leadDetails.Phone__c" ng-disabled="true" />
                            </div>

                        </div>

                        <div class="row mt-5" ng-show="showConvertedLead">
                            <h3 style="color: red; text-align:center;">Already visited site... Please check Visit Records !!</h3>
                            <h4 style="text-align:center;">Below is the details.</h4>
                            <div class="col-md-6">
                                <label class="label pe-3 text-nowrap">Name</label>
                                <input type="text" class="form-control" ng-model="oppDetails.Opportunity_Name__c" ng-disabled="true" /> 
                            </div>
                            <div class="col-md-6">
                                <label class="label pe-3 text-nowrap">Email</label>
                                <input type="text" class="form-control" ng-model="oppDetails.Email__c" ng-disabled="true" /> 
                            </div>
                            <!-- <div class="row mt-3">
                                Visit Records
                            </div>
                            <table class="mt-3">
                                <tr>
                                    <th>Name</th>
                                    <th>Booking Amount</th>
                                </tr>
                            </table> -->
                        </div>

                        <div ng-show="showCreateLead">
                            <div class="row mt-5">
                                <h6 style="color:#1e45aa;"><b>Create New Lead</b></h6>
                                <div class="col-md-6 mt-3">
                                    <label class="label pe-3 text-nowrap">Name</label>
                                    <input type="text" class="form-control" ng-model="ledDetails.Name__c" />
                                </div>
    
                                <div class="col-md-6 mt-3">
                                    <label class="label pe-3 text-nowrap">Email ID</label>
                                    <input type="text" class="form-control" ng-model="ledDetails.Email__c" />
                                </div>
    
                                <div class="col-md-6 mt-3">
                                    <label class="label pe-3 text-nowrap">Phone No.</label>
                                    <input type="text" class="form-control" ng-model="ledDetails.Phone__c" />
                                </div>
                            </div>

                            <div class="row mt-5">
                                <div class="col-md-12">
                                    <button class="button" style="text-align: center;" ng-click="createLeadRecord()">Create</button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>



                <div class="booking-form" ng-if="showVisitSection">
                    <div class="container mb-5">
                        <!-- <h5 class="heading text-center"><b>SITE VISIT FORM</b></h5> -->

                        <div class="row justify-content-between">
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label class="label pe-3 text-nowrap">Form No.</label>
                                    <input type="text" class="form-control" ng-model="visit.Form_No__c"/>
                                </div>
                            </div>
                            <div class="col-md-3">
                                
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label class="label pe-3 text-nowrap">Date of visit:</label>
                                        <input type="date" class="form-control" placeholder="DD/MM/YYYY" ng-model="visit.Actual_visit_date__c"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-tabs">
                            <div class="sidebar col-md-auto">
                                <ul>
                                    <li class="active">
                                        <a ng-click="">Customer Details</a>
                                    </li>
                                    <li>
                                        <a ng-click="">Customer's Requirements</a>
                                    </li>
                                    <li>
                                        <a ng-click="">Visit Details</a>
                                    </li>
                                    <li>
                                        <a ng-click="">To be filled by GRE</a>
                                    </li>
                                    <li>
                                        <a ng-click="">To be filled by Sales Manager</a>
                                    </li>
                                </ul>
                            </div>

                            <div class="rightbar">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Name:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <input type="text" class="form-control" ng-model="visit.Name__c"/>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Mobile No.:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="tel" class="form-control" ng-model="visit.Mobile_No__c" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Email:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="email" class="form-control" ng-model="visit.Email__c" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Date of Birth:</label>
                                            </div>
                                            <div class="col-md-6">
                                                <input type="date" class="form-control" ng-model="visit.Date_Of_Birth__c" />
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Age(in years):</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in ageGroup">
                                                        <input type="radio" ng-model="visit.Age_Group__c" ng-value="value" ng-change="changeOfAgeGroup(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Residential Address:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <textarea class="form-control" ng-model="visit.Residential_Address__c"/>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Residence City:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="text" class="form-control" ng-model="visit.City__c" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Locality(E/W):</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="text" class="form-control" ng-model="visit.Locality__c" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Pin Code:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <input class="form-control" ng-model="visit.Pincode__c"/>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Employment Type:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in employmentType">
                                                        <input type="radio" ng-model="visit.Employment_Type__c" ng-value="value" ng-change="ChangeOfEmpType(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Company Name:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="text" class="form-control" ng-model="visit.Company_Name__c" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Industry:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="text" class="form-control" ng-model="visit.Industry__c" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Office Location:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <textarea class="form-control" ng-model="visit.Office_Address__c"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Pin Code:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="text" class="form-control" ng-model="visit.Office_PinCode__c" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <button type="button" class="button float-end" ng-click="saveCustomerDet()">Save and Next</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>




                <div class="booking-form" ng-if="showCustReq">
                    <div class="container mb-5">
                        <!-- <h5 class="heading text-center"><b>SITE VISIT FORM</b></h5> -->

                        <div class="row justify-content-between">
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label class="label pe-3 text-nowrap">Form No.</label>
                                    <input type="text" class="form-control" ng-model="visit.Form_No__c"/>
                                </div>
                            </div>
                            <div class="col-md-3">
                                
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label class="label pe-3 text-nowrap">Date of visit:</label>
                                        <input type="date" class="form-control" placeholder="DD/MM/YYYY" ng-model="visit.Actual_visit_date__c"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-tabs">
                            <div class="sidebar col-md-auto">
                                <ul>
                                    <li>
                                        <a ng-click="">Customer Details</a>
                                    </li>
                                    <li class="active">
                                        <a ng-click="">Customer's Requirements</a>
                                    </li>
                                    <li>
                                        <a ng-click="">Visit Details</a>
                                    </li>
                                    <li>
                                        <a ng-click="">To be filled by GRE</a>
                                    </li>
                                    <li>
                                        <a ng-click="">To be filled by Sales Manager</a>
                                    </li>
                                </ul>
                            </div>

                            <div class="rightbar">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Budget:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in budget">
                                                        <input type="radio" ng-model="visit.Budget__c" ng-value="value" ng-change="changeOfBudget(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Area (Sq.Ft.):</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in area">
                                                        <input type="radio" ng-model="visit.Area__c" ng-value="value" ng-change="changeOfArea(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Construction Status:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in constructionStatus">
                                                        <input type="radio" ng-model="visit.Construction_Status__c" ng-value="value" ng-change="changeOfConstStatus(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Purpose Of Buying:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in purposeOfBuying">
                                                        <input type="radio" ng-model="visit.Purpose_Of_Buying__c" ng-value="value" ng-change="changeOfPurposeOfBuying(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-12">
                                                <button type="button" class="button float-end" ng-click="saveCustomerReq()">Save and Next</button>
                                                <button type="button" class="cancelbutton float-end me-2" ng-click="showFirst()">Back</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>




                <div class="booking-form" ng-if="visitDet">
                    <div class="container mb-5">
                        <!-- <h5 class="heading text-center"><b>SITE VISIT FORM</b></h5> -->

                        <div class="row justify-content-between">
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label class="label pe-3 text-nowrap">Form No.</label>
                                    <input type="text" class="form-control" ng-model="visit.Form_No__c"/>
                                </div>
                            </div>
                            <div class="col-md-3">
                                
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label class="label pe-3 text-nowrap">Date of visit:</label>
                                        <input type="date" class="form-control" placeholder="DD/MM/YYYY" ng-model="visit.Actual_visit_date__c"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-tabs">
                            <div class="sidebar col-md-auto">
                                <ul>
                                    <li>
                                        <a ng-click="">Customer Details</a>
                                    </li>
                                    <li>
                                        <a ng-click="">Customer's Requirements</a>
                                    </li>
                                    <li class="active">
                                        <a ng-click="">Visit Details</a>
                                    </li>
                                    <li>
                                        <a ng-click="">To be filled by GRE</a>
                                    </li>
                                    <li>
                                        <a ng-click="">To be filled by Sales Manager</a>
                                    </li>
                                </ul>
                            </div>

                            <div class="rightbar">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Visiting with:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="text" class="form-control" ng-model="visit.Visiting_With__c"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Visiting on<br/>behalf of:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="text" class="form-control" ng-model="visit.Visiting_On_Behalf_Of__c" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Source of visit:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in walkinSource">
                                                        <input type="radio" ng-model="visit.Walkin_Source__c" ng-value="value" ng-change="changeOfLeadSource(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div ng-show="visit.Walkin_Source__c == 'Channel Partner'">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h4 class="label">If-case of Channel Partner mention the following:</h4>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="row align-items-center mb-4">
                                                        <div class="col-md-4">
                                                            <label class="label">GR Code:</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <input type="text" class="form-control" ng-model="visit.GR_Code__c"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="row align-items-center mb-4">
                                                        <div class="col-md-4">
                                                            <label class="label">Channel partner<br/>not registered:</label>
                                                        </div>
                                                        <div class="col-md-2">
                                                            <input type="checkbox" class="form-control" ng-model="visit.Channel_Partner_Not_registered__c" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="row align-items-center mb-4">
                                                        <div class="col-md-4">
                                                            <label class="label">Firm Name:</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <input type="text" class="form-control" ng-model="visit.Firm_Name__c"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="row align-items-center mb-4">
                                                        <div class="col-md-4">
                                                            <label class="label">Channel partner<br/>Name:</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <input type="text" class="form-control" ng-model="visit.Channel_Partner_Name__c" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="row align-items-center mb-4">
                                                        <div class="col-md-4">
                                                            <label class="label">Mobile No.:</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <input type="tel" class="form-control" ng-model="visit.Channel_Partner_Mobile_No__c"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="row align-items-center mb-4">
                                                        <div class="col-md-4">
                                                            <label class="label">RERA No.:</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <input type="text" class="form-control" ng-model="visit.RERA_No__c" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row align-items-center mb-4">
                                                <div class="col-md-2">
                                                    <label class="label">Email:</label>
                                                </div>
                                                <div class="col-md-10">
                                                    <input type="email" class="form-control" ng-model="visit.Channel_Partner_Email__c"/>
                                                </div>
                                            </div>
                                        </div>

                                        <div ng-show="visit.Walkin_Source__c == 'Referral'">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h4 class="label">If-case of Referral, Please Specify:</h4>
                                                </div>
                                            </div>

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="row align-items-center mb-4">
                                                        <div class="col-md-4">
                                                            <label class="label">Name:</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <input type="text" class="form-control" ng-model="visit.Referral_Name__c"/>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="row align-items-center mb-4">
                                                        <div class="col-md-4">
                                                            <label class="label">Mobile No.:</label>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <input type="tel" class="form-control" ng-model="visit.Referral_Mobile_No__c" />
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <button type="button" class="button float-end" ng-click="savevisitDetails()">Save and Next</button>
                                                <button type="button" class="cancelbutton float-end me-2" ng-click="showSecond()">Back</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="booking-form" ng-if="showGRE">
                    <div class="container mb-5">
                        <!-- <h5 class="heading text-center"><b>SITE VISIT FORM</b></h5> -->

                        <div class="row justify-content-between">
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label class="label pe-3 text-nowrap">Form No.</label>
                                    <input type="text" class="form-control" ng-model="visit.Form_No__c"/>
                                </div>
                            </div>
                            <div class="col-md-3">
                                
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label class="label pe-3 text-nowrap">Date of visit:</label>
                                        <input type="date" class="form-control" placeholder="DD/MM/YYYY" ng-model="visit.Actual_visit_date__c"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-tabs">
                            <div class="sidebar col-md-auto">
                                <ul>
                                    <li>
                                        <a ng-click="">Customer Details</a>
                                    </li>
                                    <li>
                                        <a ng-click="">Customer's Requirements</a>
                                    </li>
                                    <li>
                                        <a ng-click="">Visit Details</a>
                                    </li>
                                    <li class="active">
                                        <a ng-click="">To be filled by GRE</a>
                                    </li>
                                    <li>
                                        <a ng-click="">To be filled by Sales Manager</a>
                                    </li>
                                </ul>
                            </div>

                            <div class="rightbar">
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Sourcing<br/>Manager:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="text" class="form-control" ng-model="visit.Sourcing_Manager__c"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Sales <br/>Manager:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="text" class="form-control" ng-model="visit.Sales_Manager__c" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Customer Gender:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in gender">
                                                        <input type="radio" ng-model="visit.Customer_Gender__c" ng-value="value" ng-change="changeOfGender(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Facilitated By<br/>Pre-Sales:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in facilitatedBy">
                                                        <input type="radio" ng-model="visit.Facilitated_By__c" ng-value="value" ng-change="changeOfFacilitatedBy(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Mobile No.:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="tel" class="form-control" ng-model="visit.GRE_Mobile_No__c"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Email:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="email" class="form-control" ng-model="visit.GRE_Email__c" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-4">
                                                <label class="label">Date Of Birth:</label>
                                            </div>
                                            <div class="col-md-8">
                                                <input type="date" class="form-control" ng-model="visit.GRE_Date_of_Birth__c"/>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Customer<br/>Time-In:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="time" class="form-control" ng-model="visit.Customer_Time_In__c"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Customer<br/>Time-Out:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="time" class="form-control" ng-model="visit.Customer_Time_Out__c" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <button type="button" class="button float-end" ng-click="saveGREDetails()">Save and Next</button>
                                                <button type="button" class="cancelbutton float-end me-2" ng-click="showThird()">Back</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- To Be Continued -->

                <div class="booking-form" ng-if="showSalesManager">
                    <div class="container mb-5">

                        <div class="row justify-content-between">
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label class="label pe-3 text-nowrap">Form No.</label>
                                    <input type="text" class="form-control" ng-model="visit.Form_No__c"/>
                                </div>
                            </div>
                            <div class="col-md-3">
                                
                            </div>
                            <div class="col-md-3">
                                <div class="d-flex align-items-center">
                                    <label class="label pe-3 text-nowrap">Date of visit:</label>
                                        <input type="date" class="form-control" placeholder="DD/MM/YYYY" ng-model="visit.Actual_visit_date__c"/>
                                </div>
                            </div>
                        </div>

                        <div class="form-tabs">
                            <div class="sidebar col-md-auto">
                                <ul>
                                    <li>
                                        <a ng-click="">Customer Details</a>
                                    </li>
                                    <li>
                                        <a ng-click="">Customer's Requirements</a>
                                    </li>
                                    <li>
                                        <a ng-click="">Visit Details</a>
                                    </li>
                                    <li>
                                        <a ng-click="">To be filled by GRE</a>
                                    </li>
                                    <li class="active">
                                        <a ng-click="">To be filled by Sales Manager</a>
                                    </li>
                                </ul>
                            </div>

                            <div class="rightbar">
                                <div class="row">
                                    <div class="col-md-12">

                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Customer <br/>Classification:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in classification">
                                                        <input type="radio" ng-model="visit.Customer_Classicfication__c" ng-value="value" ng-change="changeOfClassification(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Lead <br/>Classification:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in leadClassification">
                                                        <input type="radio" ng-model="visit.Lead_Classification__c" ng-value="value" ng-change="changeOfLeadClassificatn(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">If Closed, <br/>Reason for it:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in closedReason">
                                                        <input type="radio" ng-model="visit.Reason_Of_Lead_Closed__c" ng-value="value" ng-change="changeOfLeadClosed(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <h4 class="label">Customer's current Residence:</h4>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Ownership:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in ownership">
                                                        <input type="radio" ng-model="visit.Current_House_Ownership__c" ng-value="value" ng-change="changeOfOwnership(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Configuration:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="text" class="form-control" ng-model="visit.Configuration__c"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Family Size:</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="number" class="form-control" ng-model="visit.Family_Size__c" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-4">
                                                <label class="label">Current Floor No.:</label>
                                            </div>
                                            <div class="col-md-8">
                                                <input type="number" class="form-control" ng-model="visit.Current_Floor_No__c"/>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-6">
                                                <h4 class="label">Customer's desired requirement:</h4>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Budget(INR):</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="number" class="form-control" ng-model="visit.Customer_s_Desired_Budget__c"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="row align-items-center mb-4">
                                                    <div class="col-md-4">
                                                        <label class="label">Location(E/w):</label>
                                                    </div>
                                                    <div class="col-md-8">
                                                        <input type="text" class="form-control" ng-model="visit.Customer_s_Desired_Location_E_W__c" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Source Of<br/>Funding:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in sourceOfFunding">
                                                        <input type="radio" ng-model="visit.Source_Of_Funding__c" ng-value="value" ng-change="changeOfSourceFunding(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row align-items-center mb-4">
                                            <div class="col-md-2">
                                                <label class="label">Ethnicity:</label>
                                            </div>
                                            <div class="col-md-10">
                                                <div class="row">
                                                    <div class="col-md-4 pt-3" ng-repeat="value in ethnicity">
                                                        <input type="radio" ng-model="visit.Ethnicity__c" ng-value="value" ng-change="changeOfEthnicity(value)" />
                                                        <label>{{value}}</label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <button type="button" class="button float-end" ng-click="finalSubmit()">Submit</button>
                                                <button type="button" class="cancelbutton float-end me-2" ng-click="showForth()">Back</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </body>
        </div>
    </html>
</apex:page>